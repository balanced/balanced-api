scenarios:
  - name: create_card
    request:
      method: POST
      href: /cards
      schema:
        "$ref": "requests/card.json"
      body: {
        "number": "4111111111111111",
        "expiration_month": 12,
        "expiration_year": 2018
      }
    response:
      status_code: 201
      schema:
        "$ref": "responses/cards.json"
  - name: create_hold
    request:
      method: POST
      href: "{create_card,cards.holds}"
      schema:
        "$ref": "requests/cards/hold.json"
      body: {
        "amount": 12341
      }
    response:
      status_code: 201
      schema:
        "$ref": "responses/card_holds.json"
  - name: capture_hold
    request:
      method: POST
      href: "{create_hold,card_holds.debits}"
      schema:
        "$ref": "requests/card_holds/debit.json"
    response:
      status_code: 201
      schema:
        "$ref": "responses/debits.json"
  - name: capture_hold_again
    request:
      method: POST
      href: "{create_hold,card_holds.debits}"
      schema:
        "$ref": "requests/card_holds/debit.json"
    response:
      status_code: 409
      schema:
        "$ref": "responses/errors.json"
      matches: { "category_code": "cannot-capture-authorization" }
